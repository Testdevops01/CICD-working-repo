#!/bin/bash

set -e
echo "Starting web server installation..."

# Detect package manager and install appropriate web server
if command -v apt-get > /dev/null 2>&1; then
    echo "Ubuntu/Debian system detected"
    apt-get update -y
    apt-get install -y apache2
    systemctl enable apache2
    systemctl start apache2
    echo "Apache2 installed on Ubuntu"
elif command -v yum > /dev/null 2>&1; then
    echo "Amazon Linux/RHEL system detected"
    yum update -y
    yum install -y httpd
    systemctl enable httpd
    systemctl start httpd
    echo "HTTPD installed on Amazon Linux"
else
    echo "ERROR: Unsupported operating system"
    exit 1
fi

# Create web directory
mkdir -p /var/www/html/
echo "Web directory created"

echo "Web server installation completed successfully"
exit 0
